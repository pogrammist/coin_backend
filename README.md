# Инициализация базы данных с помощью Docker Compose

Этот проект использует Docker и Docker Compose для настройки и инициализации базы данных PostgreSQL. Следуйте инструкциям ниже, чтобы запустить проект и инициализировать базу данных.

## Предварительные требования

- Установленный [Docker](https://www.docker.com/get-started) и [Docker Compose](https://docs.docker.com/compose/).

## Шаги по инициализации базы данных

1. **Клонируйте репозиторий** (если вы еще этого не сделали):

   ```bash
   git clone <URL_вашего_репозитория>
   cd <имя_папки_репозитория>
   ```

2. **Настройте переменные окружения**:

   Создайте файл `.env` в корневой директории проекта и добавьте необходимые переменные окружения:

   ```env
   CONFIG_PATH=путь_к_конфигурации
   MIGRATIONS_PATH=путь_к_миграциям
   POSTGRES_USER=ваш_пользователь
   POSTGRES_PASSWORD=ваш_пароль
   POSTGRES_DB=ваша_база_данных
   ```

3. **Запустите Docker Compose**:

   Выполните следующую команду для запуска контейнеров:

   ```bash
   docker-compose -f docker-compose-migrator.yaml up --build --remove-orphans
   ```

   Эта команда создаст и запустит контейнеры для вашего приложения и базы данных.

4. **Проверьте состояние контейнеров**:

   Убедитесь, что контейнеры запущены и работают корректно:

   ```bash
   docker-compose ps
   ```

5. **Инициализация базы данных**:

   После успешного запуска контейнеров, база данных будет автоматически инициализирована в директории ./storage .

## Запуск проекта

1. **Запустите проект**:

   После инициализации базы данных выполните следующую команду для запуска вашего приложения:

   ```bash
   docker-compose -f docker-compose.yaml up
   ```

   Эта команда запустит ваше приложение в контейнерах.

## Примеры запросов

### Создание кошелька

```http
POST /wallet/create
Content-Type: application/json

{
   "userId": "ваш_UUID_пользователя",
   "amount": 1000
}
```

### Пополнение кошелька

```http
POST /wallet
Content-Type: application/json

{
   "walletId": "ваш_UUID_кошелька",
   "operationType": "DEPOSIT",
   "amount": 500
}
```

### Снятие средств с кошелька

```http
POST /wallet
Content-Type: application/json

{
   "walletId": "ваш_UUID_кошелька",
   "operationType": "WITHDRAW",
   "amount": 200
}
```

### Получение баланса кошелька

```http
GET /wallets/{walletId}
```

